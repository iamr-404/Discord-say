<!DOCTYPE html>
<html xmlns='http://www.w3.org/1999/xhtml' lang='' xml:lang=''>
<head>
	<meta charset='utf-8' />
	<meta name='viewport' content='width=device-width, user-scalable=no' />
	<title>RPG</title>

	<style type='text/css'>
		body {
			touch-action: none;
			margin: 0;
			padding: 0;
			text-align: center;
			background-color: black;
		}

		#canvas {
			display: block;
			margin: 0;
		}

		#canvas:focus {
			outline: none;
		}

		#status {
			position: absolute;
			inset: 0;
			display: flex;
			justify-content: center;
			align-items: center;
			visibility: hidden;
		}

		#status-progress {
			width: 366px;
			height: 7px;
			background-color: #38363A;
			border: 1px solid #444246;
			padding: 1px;
			border-radius: 2px;
			visibility: visible;
		}

		#status-progress-inner {
			height: 100%;
			width: 0;
			transition: width 0.5s linear;
			background-color: #202020;
		}

		#status-indeterminate {
			height: 42px;
			visibility: visible;
			position: relative;
		}

		#status-indeterminate > div {
			width: 4.5px;
			height: 0;
			border-style: solid;
			border-width: 9px 3px 0 3px;
			border-color: #2b2b2b transparent transparent transparent;
			transform-origin: center 21px;
			position: absolute;
		}

		#status-notice {
			color: #e0e0e0;
			background: #3b3943;
			padding: 6px;
		}
	</style>

	<link rel='icon' type='image/png' href='index.icon.png' />
</head>

<body>
	<canvas id='canvas'>
		HTML5 canvas appears to be unsupported in the current browser.
	</canvas>

	<div id='status'>
		<div id='status-progress' style='display:none'>
			<div id='status-progress-inner'></div>
		</div>
		<div id='status-indeterminate' style='display:none'></div>
		<div id='status-notice' style='display:none'></div>
	</div>

	<!-- GODOT ENGINE -->
	<script src='index.js'></script>

	<!-- DISCORD EMBEDDED APP SDK -->
	<script src="https://cdn.jsdelivr.net/npm/@discord/embedded-app-sdk"></script>

	<script>
		/* ===============================
		   DISCORD ACTIVITY INIT
		================================ */
		const discordSdk = new DiscordSDK.DiscordSDK({
			clientId: "1445785681057157415"
		});

		async function initDiscord() {
			try {
				await discordSdk.ready();
				console.log("âœ… Discord Activity Connected");
			} catch (e) {
				console.warn("Discord SDK failed:", e);
			}
		}
		initDiscord();

		/* ===============================
		   GODOT BOOTSTRAP
		================================ */
		const GODOT_CONFIG = {
			args: [],
			canvasResizePolicy: 2,
			executable: "index",
			experimentalVK: false,
			fileSizes: {
				"index.pck": 608576,
				"index.wasm": 19796835
			},
			focusCanvas: true,
			gdnativeLibs: []
		};

		const engine = new Engine(GODOT_CONFIG);

		if (!Engine.isWebGLAvailable()) {
			document.getElementById("status-notice").innerText = "WebGL not available";
		} else {
			engine.startGame().then(() => {
				console.log("ðŸŽ® Godot Game Started");
			});
		}
	</script>
</body>
</html>
